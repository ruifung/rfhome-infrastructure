machine:
  install:
    extensions:
      - image: ghcr.io/siderolabs/qemu-guest-agent:8.0.2
    extraKernelArgs:
      - net.ifnames=0
  nodeLabels:
    location: rfhome
    type: proxmox-x64
    rook-csi-enabled: "true"
  network:
    kubespan:
      enabled: true
      allowDownPeerBypass: true
      advertiseKubernetesNetworks: false
  kubelet:
    extraArgs:
      rotate-server-certificates: true
  features:
    kubePrism:
      enabled: true
      port: 7445
  sysctls:
    net.ipv4.conf.all.rp_filter: 0
  registries:
    mirrors:
      docker.io:
        overridePath: true
        endpoints:
          - https://harbor.services.home.yrf.me/v2/dockerhub/
      gcr.io:
        overridePath: true
        endpoints:
          - https://harbor.services.home.yrf.me/v2/gcr/
      ghcr.io:
        overridePath: true
        endpoints:
          - https://harbor.services.home.yrf.me/v2/ghcr/
      k8s.gcr.io:
        overridePath: true
        endpoints:
          - https://harbor.services.home.yrf.me/v2/k8s/
      registry.k8s.io:
        overridePath: true
        endpoints:
          - https://harbor.services.home.yrf.me/v2/k8s/
      lscr.io:
        overridePath: true
        endpoints:
          - https://harbor.services.home.yrf.me/v2/lscr/
      quay.io:
        overridePath: true
        endpoints:
          - https://harbor.services.home.yrf.me/v2/quayio/
      registry.developers.crunchydata.com:
        overridePath: true
        endpoints:
          - https://harbor.services.home.yrf.me/v2/crunchydata/
      artifacthub.io:
        overridePath: true
        endpoints:
          - https://harbor.services.home.yrf.me/v2/artifacthub/
      pkg.dev:
        overridePath: true
        endpoints:
          - https://harbor.services.home.yrf.me/v2/pkgdev/  

cluster:
  discovery:
    enabled: true
  controlPlane:
    endpoint: https://10.229.97.99:6443
  network:
    cni:
      name: none
    podSubnets:
      - 10.96.0.0/16
      # - fd96:9696:96::/48
    serviceSubnets:
      - 10.97.0.0/16
      # - fd96:9696:97::/48
  proxy:
    disabled: true
