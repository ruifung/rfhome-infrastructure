apiVersion: v1alpha1
kind: NetworkDefaultActionConfig
ingress: block
---
apiVersion: v1alpha1
kind: NetworkRuleConfig
name: kubelet-ingress
portSelector:
  ports:
    - 10250
  protocol: tcp
ingress:
  - subnet: 10.229.97.0/24
  - subnet: fd96:619:97::/64
---
apiVersion: v1alpha1
kind: NetworkRuleConfig
name: apid-ingress
portSelector:
  ports:
    - 50000
  protocol: tcp
ingress:
  - subnet: 0.0.0.0/0
  - subnet: ::/0
---
apiVersion: v1alpha1
kind: NetworkRuleConfig
name: trustd-ingress
portSelector:
  ports:
    - 50001
  protocol: tcp
ingress:
  - subnet: 10.229.97.0/24
  - subnet: fd96:619:97::/64
---
apiVersion: v1alpha1
kind: NetworkRuleConfig
name: kubernetes-api-ingress
portSelector:
  ports:
    - 6443
  protocol: tcp
ingress:
  - subnet: 0.0.0.0/0
  - subnet: ::/0
---
apiVersion: v1alpha1
kind: NetworkRuleConfig
name: etcd-ingress
portSelector:
  ports:
    - 2379-2380
  protocol: tcp
ingress:
  - subnet: 10.229.97.31/32
  - subnet: 10.229.97.32/32
  - subnet: 10.229.97.33/32
---
apiVersion: v1alpha1
kind: NetworkRuleConfig
name: metrics
portSelector:
  ports:
    - 2381
    - 10257
    - 10259
  protocol: tcp
ingress:
  - subnet: 10.229.97.0/24
  - subnet: fd96:619:97::/64
---
apiVersion: v1alpha1
kind: NetworkRuleConfig
name: cni-geneve
portSelector:
  ports:
    - 6081 
  protocol: udp
ingress:
  - subnet: 10.229.97.0/24
  - subnet: fd96:619:97::/64