---
apiVersion: source.toolkit.fluxcd.io/v1beta2
kind: HelmRepository
metadata:
  name: grafana-oci
  namespace: grafana
spec:
  interval: 15m
  url: oci://ghcr.io/grafana/helm-charts
---
apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
  name: grafana-operator
  namespace: home-network
spec:
  releaseName: grafana-operator
  install:
    skipCRDs: false
  chart:
    spec:
      chart: grafana
      version: v5.9.0
      sourceRef:
        apiVersion: source.toolkit.fluxcd.io/v1
        kind: HelmRepository
        name: grafana-oci
  interval: 30m
  timeout: 1h
  values:
    priorityClassName: rfhome-low-priority
    serviceMonitor:
      enabled: true
