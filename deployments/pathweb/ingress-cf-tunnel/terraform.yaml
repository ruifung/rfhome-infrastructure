---
apiVersion: infra.contrib.fluxcd.io/v1alpha1
kind: Terraform
metadata:
  name: ingress-cf-tunnel
  namespace: flux-system
spec:
  approvePlan: auto
  destroyResourcesOnDeletion: true
  interval: 24h
  path: ./deployments/pathweb/ingress-cf-tunnel
  varsFrom:
  - kind: Secret
    name: ingress-cf-tunnel-tf-vars
  sourceRef:
    kind: GitRepository
    name: rfhome-infrastructure
  writeOutputsToSecret:
    name: ingress-cf-tunnel-token
    outputs:
    - token
---
apiVersion: v1
kind: Secret
metadata:
  name: ingress-cf-tunnel-token
  namespace: flux-system
  annotations:
    reflector.v1.k8s.emberstack.com/reflection-allowed: "true"
    reflector.v1.k8s.emberstack.com/reflection-allowed-namespaces: "traefik"
    reflector.v1.k8s.emberstack.com/reflection-auto-namespaces: "traefik"
data:
