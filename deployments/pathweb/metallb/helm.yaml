---
apiVersion: source.toolkit.fluxcd.io/v1beta2
kind: HelmRepository
metadata:
  name: metallb
  namespace: flux-system
spec:
  interval: 15m
  url: https://metallb.github.io/metallb

# ---
# apiVersion: helm.toolkit.fluxcd.io/v2beta2
# kind: HelmRelease
# metadata:
#   name: metallb
#   namespace: flux-system
# spec:
#   chart:
#     spec:
#       chart: metallb
#       version: 0.13.12
#       reconcileStrategy: ChartVersion
#       sourceRef:
#         kind: HelmRepository
#         name: metallb
#   interval: 15m
#   timeout: 1h
#   targetNamespace: kube-system
#   values:
#     controller:
#       priorityClassName: rfhome-high-priority
#       nodeSelector:
#         node-role.kubernetes.io/control-plane:
#       tolerations:
#       - key: node-role.kubernetes.io/control-plane
#         operator: Exists
#         effect: NoSchedule
#     speaker:
#       enabled: false
      # priorityClassName: rfhome-network-critical
      # frr:
      #   enabled: false
      # affinity:
      #   nodeAffinity:
      #     requiredDuringSchedulingIgnoredDuringExecution:
      #       nodeSelectorTerms:
      #       - matchExpressions:
      #         - key: node-role.kubernetes.io/control-plane
      #           operator: DoesNotExist
      # tolerations:
      # - operator: Exists