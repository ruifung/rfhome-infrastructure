---
name: mirror-repository
on: [push]
jobs:
  push-to-forgejo:
    runs-on: ubuntu-latest
    # Only run this on GitHub.

    if: contains(github.server_url, 'github.com')
    steps:
    - uses: actions/checkout@v4
      with:
        fetch-depth: 0
    - uses: yesolutions/mirror-action@master
      with:
        REMOTE: "https://git.yrf.me/ruifung/rfhome-infrastructure.git"
        GIT_USERNAME: github-sync
        GIT_PASSWORD: ${{ secrets.RF_FORGEJO_TOKEN }}
